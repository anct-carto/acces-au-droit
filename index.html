<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>AccesAuDroit</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    <link rel="shortcut icon" type="image/png" />
	<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.3/dist/leaflet.css" />
	<link rel="stylesheet" href="src/leaflet-search.css" />
    <!--[if lte IE 8]><link rel="stylesheet" href="//cdn.leafletjs.com/leaflet-0.7.2/leaflet.ie.css" /><![endif]-->

    <link rel="stylesheet" href="src/leaflet-sidebar.css" />
	<link rel="stylesheet" href="style.css" />

</head>

<body>
    <div id="sidebar" class="sidebar collapsed">
        <div class="sidebar-tabs">
            <ul role="tablist">
                <li><a href="#home" role="tab" id="logo"><i class="fa fa-home"></i></a></li>
				<li><a href="img/AccesAuDroit.jpg" role="tab" target="_blank" title="Télécharger la carte"><i class="fa fa-download"></i></a></li>
            </ul>
        </div>

        <!-- Tab panes -->
        <div class="sidebar-content">
            <div class="sidebar-pane" id="home">
                <h1 style="text-transform:uppercase" class="sidebar-header">
                    Accès au Droit
                    <span class="sidebar-close" id="close"><i class="fa fa-caret-left"></i></span>
                </h1>
				
				<div class="presentation" id="defaut">
					
					</br>
					<i>Cliquez sur un point de la carte pour afficher les informations / cocher les catégories en légende pour isoler les points correspondants</i>
					</br>
					
					<div id="legende">
						</br>
						<h3>Spécialité de l'association</h3>
						<button class="bouton_on" onclick="filter('SOC')" title="droit au travail, contrats de travail, dispositifs sociaux d'assurance et droit à la sécurité sociale" id="CHECK_SPE_SOC" name="Droits sociaux" value="sociaux">• Droits sociaux</button><br/>
						<button class="bouton_on" onclick="filter('ETR')" title="droit des étrangers" id="CHECK_SPE_ETR" name="droit des étrangers" value="étrangers" >• Droit des étrangers</button><br/>
						<button class="bouton_on" onclick="filter('RAC')" title="violences à caractère raciste" id="CHECK_SPE_RAC" name="Violences à caractère raciste" value="raciste">• Violences à caractère raciste</button><br/>
						<button class="bouton_on" onclick="filter('SEX')" title="violences à caractère sexiste" id="CHECK_SPE_SEX" name="Violences à caractère sexiste" value="sexiste">• Violences à caractère sexiste</button><br/>
						<button class="bouton_on" onclick="filter('LCD')" title="lutte contre les discriminations" id="CHECK_SPE_LCD" name="Lutte contre les discriminations" value="lutte">• Lutte contre les discriminations</button>
						<h3>Association</h3>
						<div class="gauche">
						<button class="bouton_asso" onclick="filter_asso('AMF')" title="Association des Marocains en France" id="CHECK_SPE_SOC" value="sociaux"><img id="picto_nat" src="img/PICTOSleg_01.png" style="width:20px; padding-right:10px;" />AMF</button><br/>
						<button class="bouton_asso" onclick="filter_asso('ATF')" title="Association des Tunisiens en France" id="CHECK_SPE_ETR" value="étrangers" ><img id="picto_nat" src="img/PICTOSleg_02.png" style="width:20px; padding-right:10px;" />ATF</button><br/>
						<button class="bouton_asso" onclick="filter_asso('ATMF')" title="Association des Travailleurs Maghrébins de France" id="CHECK_SPE_RAC" value="raciste"><img id="picto_nat" src="img/PICTOSleg_03.png" style="width:20px; padding-right:10px;" />ATMF</button><br/>
						<button class="bouton_asso" onclick="filter_asso('DAL')" title="Droit au Logement" id="CHECK_SPE_SEX" value="sexiste"><img id="picto_nat" src="img/PICTOSleg_04.png" style="width:20px; padding-right:10px;" />DAL</button><br/>
						<button class="bouton_asso" onclick="filter_asso('FASTI')" title="Fédération des associations de solidarité avec tous.te.s les immigré.e.s" id="CHECK_SPE_LCD" value="lutte"><img id="picto_nat" src="img/PICTOSleg_05.png" style="width:20px; padding-right:10px;" />FASTI</button><br/>
						<button class="bouton_asso" onclick="filter_asso('FIAISM')" title="Femmes Inter Associations Inter Service Migrants" id="CHECK_SPE_LCD" value="lutte"><img id="picto_nat" src="img/PICTOSleg_06.png" style="width:20px; padding-right:10px;" />FIA-ISM</button>
						</div>
						<div class="droite">
						<button class="bouton_asso" onclick="filter_asso('FNDMDP')" title="Fédération Nationale des Maisons des Potes" id="CHECK_SPE_LCD" value="lutte"><img id="picto_nat" src="img/PICTOSleg_12.png" style="width:20px; padding-right:10px;" />FNDMDP</button><br/>
						<button class="bouton_asso" onclick="filter_asso('FTCR')" title="Fédération des Tunisiens pour une Citoyenneté des deux Rives" id="CHECK_SPE_LCD" value="lutte"><img id="picto_nat" src="img/PICTOSleg_11.png" style="width:20px; padding-right:10px;" />FTCR</button><br/>
						<button class="bouton_asso" onclick="filter_asso('GISTI')" title="Groupe d'information et de soutien des immigrés" id="CHECK_SPE_LCD" value="lutte"><img id="picto_nat" src="img/PICTOSleg_10.png" style="width:20px; padding-right:10px;" />GISTI</button><br/>
						<button class="bouton_asso" onclick="filter_asso('MRAP')" title="Mouvement contre le racisme et pour l'amitié entre les peuples" id="CHECK_SPE_LCD" value="lutte"><img id="picto_nat" src="img/PICTOSleg_09.png" style="width:20px; padding-right:10px;" />MRAP</button><br/>
						<button class="bouton_asso" onclick="filter_asso('SOS')" title="SOS Racisme" id="CHECK_SPE_LCD" value="lutte"><img id="picto_nat" src="img/PICTOSleg_08.png" style="width:20px; padding-right:10px;" />SOS Racisme</button><br/><br/>
						</div>
					</div>
					<div id="texte">
						</br>
						<h1>Rétablir l’égalité en luttant contre les discriminations</h1>
						<p class="lorem"><strong>La prévention et la lutte contre les discriminations est un domaine d’intervention historique de la politique de la ville. Chaque année, ce sont plus de 10 millions d’euros de crédit de la politique de la ville qui sont mobilisés pour contribuer à cette priorité stratégique.</strong></p>
						<p class="lorem">Ses champs d’intervention recouvrent l’accès aux droits, l’accompagnement des victimes de discriminations, les actions d’éducation ou de communication contre le racisme ou le sexisme, la construction d’une histoire partagée des territoires de la politique de la ville…</p>
						<p class="lorem">Parmi les critères énoncés par la loi, la prévention des discriminations liées à l’origine, réelle ou supposée, et la discrimination territoriale à l’adresse sont éligibles au soutien et aux financements sur les crédits spécifiques de la politique de la ville. Souvent dénoncées par les résidents des quartiers, les discriminations constituent une forte demande sociale et nécessitent un travail étroit avec les habitants en lien avec les conseils citoyens. </p>
						<p class="lorem">La lutte contre les discriminations constitue un axe transversal des contrats de ville pour combattre les inégalités. Elle s’attache à lever le déni des acteurs publics et privés, à mettre des mots sur la réalité vécue et à renforcer l’enjeu fondamental qu’est la citoyenneté. Elle repose sur une approche intégrée afin de mobiliser tous les partenaires du contrat de ville (habitants, associations, entreprises, collectivités).</p>
						<p class="lorem">Afin d’aider les acteurs territoriaux à répondre à cet enjeu majeur, le Commissariat général à l'égalité des territoires (CGET) met à leur disposition différents dispositifs qu’ils peuvent mobiliser en tant que de besoin dans le cadre des contrats de ville :</p>
						<div style="padding-left:20px">
							<p class="lorem"><strong>&rarr; les diagnostics territoriaux</strong></p>
							<p class="lorem"><strong>&rarr; la formation des acteurs locaux</strong></p>
							<p class="lorem"><strong>&rarr; les plans territoriaux de lutte contre les discriminations</strong></p>
							<p class="lorem"><strong>&rarr; l’accompagnement des acteurs à la mise en œuvre</strong></p>
						</div>
					</div>
					
					<br/>
					<p><i>Sources : <a href="https://www.cget.gouv.fr/territoires/quartiers-de-la-politique-de-la-ville" style="text-decoration:none;" target="_blank ">DVCU</a> • Réalisation : <a href="https://www.cget.gouv.fr/ressources/cartotheque" style="text-decoration:none;" target="_blank ">CGET service cartographie</a> • Dernière mise à jour : 27 novembre 2018</i></p>
				
				</div>

				<div class="ol-popup" id="popup">
					<div id="titre"></div>
					<div id="coordonnees"></div>
					<div id="spe"></div>
					<div id="acc"></div>					
					<div id="pub"></div>
				</div>
				
	
				
            </div>

            <div class="sidebar-pane" id="profile">
                <h1 class="sidebar-header">Profile<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
            </div>

        </div>
    </div>


	<div id="mapid" class="sidebar-map"></div>
	
    <script src="https://unpkg.com/leaflet@1.3.3/dist/leaflet.js"></script>
    <script src="https://turbo87.github.io/sidebar-v2/js/leaflet-sidebar.js"></script>
	<script src='https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js'></script>
	
	<script type="text/javascript" src="data/departements.js"></script>
	<script src="src/leaflet-search.js"></script>
	<script type="text/javascript" src="data/regions.js"></script>

	
    <script>
		
			
		
		// Création de la carte
		var map = L.map('mapid', {maxZoom:17, minZoom:5})
		.setView([46.5, 2], 6);
		map.zoomControl.setPosition('topright');
		
		//Définition des pictos
		var LeafIcon = L.Icon.extend({
		options: {
			//shadowUrl: 'img/shadow.png',
			//shadowSize:   [23, 45],
			//shadowAnchor: [0, 0],
			//iconSize:     [25, 25],
			//iconAnchor:   [0, 0],
			//popupAnchor:  [0, -30]
		}
		});
		
		var picto_AMF = new LeafIcon({iconUrl: 'img/PICTOS_petits_01.png', iconSize: [25,31], iconAnchor:[12.5,31]}),
			picto_ATF = new LeafIcon({iconUrl: 'img/PICTOS_petits_02.png', iconSize: [25,31], iconAnchor:[12.5,31]}),
			picto_ATMF = new LeafIcon({iconUrl: 'img/PICTOS_petits_03.png', iconSize: [25,31], iconAnchor:[12.5,31]}),
			picto_DAL = new LeafIcon({iconUrl: 'img/PICTOS_petits_04.png', iconSize: [25,31], iconAnchor:[12.5,31]}),
			picto_FASTI = new LeafIcon({iconUrl: 'img/PICTOS_petits_05.png', iconSize: [25,31], iconAnchor:[12.5,31]}),
			picto_FIAISM = new LeafIcon({iconUrl: 'img/PICTOS_petits_06.png', iconSize: [25,31], iconAnchor:[12.5,31]}),
			picto_FNDMDP = new LeafIcon({iconUrl: 'img/PICTOS_petits_07.png', iconSize: [25,31], iconAnchor:[12.5,31]});
			picto_FTCR = new LeafIcon({iconUrl: 'img/PICTOS_petits_08.png', iconSize: [25,31], iconAnchor:[12.5,31]});
			picto_GISTI = new LeafIcon({iconUrl: 'img/PICTOS_petits_09.png', iconSize: [25,31], iconAnchor:[12.5,31]});
			picto_MRAP = new LeafIcon({iconUrl: 'img/PICTOS_petits_10.png', iconSize: [25,31], iconAnchor:[12.5,31]});
			picto_SOS = new LeafIcon({iconUrl: 'img/PICTOS_petits_11.png', iconSize: [25,31], iconAnchor:[12.5,31]});
		
		var picto_AMF_on = new LeafIcon({iconUrl: 'img/PICTOS_01.png', iconSize: [41,51], iconAnchor:[20.5,51]}),
			picto_ATF_on = new LeafIcon({iconUrl: 'img/PICTOS_02.png', iconSize: [41,51], iconAnchor:[20.5,51]}),
			picto_ATMF_on = new LeafIcon({iconUrl: 'img/PICTOS_03.png', iconSize: [41,51], iconAnchor:[20.5,51]}),
			picto_DAL_on = new LeafIcon({iconUrl: 'img/PICTOS_04.png', iconSize: [41,51], iconAnchor:[20.5,51]}),
			picto_FASTI_on = new LeafIcon({iconUrl: 'img/PICTOS_05.png', iconSize: [41,51], iconAnchor:[20.5,51]}),
			picto_FIAISM_on = new LeafIcon({iconUrl: 'img/PICTOS_06.png', iconSize: [41,51], iconAnchor:[20.5,51]}),
			picto_FNDMDP_on = new LeafIcon({iconUrl: 'img/PICTOS_07.png', iconSize: [41,51], iconAnchor:[20.5,51]});
			picto_FTCR_on = new LeafIcon({iconUrl: 'img/PICTOS_08.png', iconSize: [41,51], iconAnchor:[20.5,51]});
			picto_GISTI_on = new LeafIcon({iconUrl: 'img/PICTOS_09.png', iconSize: [41,51], iconAnchor:[20.5,51]});
			picto_MRAP_on = new LeafIcon({iconUrl: 'img/PICTOS_10.png', iconSize: [41,51], iconAnchor:[20.5,51]});
			picto_SOS_on = new LeafIcon({iconUrl: 'img/PICTOS_11.png', iconSize: [41,51], iconAnchor:[20.5,51]});
			
		var picto_cible = new LeafIcon({iconUrl: 'img/PICTOS_cible.png', iconSize: [41,41], iconAnchor:[21,37]});

		// Choix du fond de carte 
		var basemap = L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png', {
			attribution: '<a href="https://www.cget.gouv.fr/ressources/cartotheque" target="blank">CGET service Carto</a>',
			maxZoom: 17
		}).addTo(map);
		
		//Ajout des données drive
		var publicSpreadsheetUrl = 'https://docs.google.com/spreadsheets/d/17Fj-vJg50BOjz5WLqhSy-BPdouadxqnCTM81OUiRJ6E/edit?usp=sharing';
		
		function init() {
			Tabletop.init({ 
				key: publicSpreadsheetUrl,
				callback: showInfo,
				simpleSheet: true
			})
		}
		
		//Création du layer de markers
		var markersLayer = new L.layerGroup();
		markersLayer.addTo(map);
		
		//Ajout de la barre de recherche
		var controlSearch = new L.Control.Search({
			position:'topright',		
			layer: markersLayer,
			initial: false,
			zoom: 12,
			marker: false
		});
		map.addControl( controlSearch );
	
		//Aller chercher les données et créer les markers
		function showInfo(data, tabletop) {
		
			for (var i in data){
				
				marker = new L.marker([data[i].LAT, data[i].LNG], {title: data[i].COMMUNE});
				
				if (data[i].ID_ASSO == 'AMF'){marker.setIcon(picto_AMF); marker.on('mouseover', function(e) {e.target.setIcon(picto_AMF_on); }); marker.on('mouseout', function(e) {e.target.setIcon(picto_AMF); });}
				else if (data[i].ID_ASSO == 'ATF'){marker.setIcon(picto_ATF); marker.on('mouseover', function(e) {e.target.setIcon(picto_ATF_on); }); marker.on('mouseout', function(e) {e.target.setIcon(picto_ATF); });}
				else if (data[i].ID_ASSO == 'ATMF'){marker.setIcon(picto_ATMF); marker.on('mouseover', function(e) {e.target.setIcon(picto_ATMF_on); }); marker.on('mouseout', function(e) {e.target.setIcon(picto_ATMF); });}
				else if (data[i].ID_ASSO == 'DAL'){marker.setIcon(picto_DAL); marker.on('mouseover', function(e) {e.target.setIcon(picto_DAL_on); }); marker.on('mouseout', function(e) {e.target.setIcon(picto_DAL); });}
				else if (data[i].ID_ASSO == 'FASTI'){marker.setIcon(picto_FASTI); marker.on('mouseover', function(e) {e.target.setIcon(picto_FASTI_on); }); marker.on('mouseout', function(e) {e.target.setIcon(picto_FASTI); });}
				else if (data[i].ID_ASSO == 'FIAISM'){marker.setIcon(picto_FIAISM); marker.on('mouseover', function(e) {e.target.setIcon(picto_FIAISM_on); }); marker.on('mouseout', function(e) {e.target.setIcon(picto_FIAISM); });}
				else if (data[i].ID_ASSO == 'FNDMDP'){marker.setIcon(picto_FNDMDP); marker.on('mouseover', function(e) {e.target.setIcon(picto_FNDMDP_on); }); marker.on('mouseout', function(e) {e.target.setIcon(picto_FNDMDP); });}
				else if (data[i].ID_ASSO == 'FTCR'){marker.setIcon(picto_FTCR); marker.on('mouseover', function(e) {e.target.setIcon(picto_FTCR_on); }); marker.on('mouseout', function(e) {e.target.setIcon(picto_FTCR); });}
				else if (data[i].ID_ASSO == 'GISTI'){marker.setIcon(picto_GISTI); marker.on('mouseover', function(e) {e.target.setIcon(picto_GISTI_on); }); marker.on('mouseout', function(e) {e.target.setIcon(picto_GISTI); });}
				else if (data[i].ID_ASSO == 'MRAP'){marker.setIcon(picto_MRAP); marker.on('mouseover', function(e) {e.target.setIcon(picto_MRAP_on); }); marker.on('mouseout', function(e) {e.target.setIcon(picto_MRAP); });}
				else if (data[i].ID_ASSO == 'SOS'){marker.setIcon(picto_SOS); marker.on('mouseover', function(e) {e.target.setIcon(picto_SOS_on); }); marker.on('mouseout', function(e) {e.target.setIcon(picto_SOS); });}
				
				marker.properties = {};
				marker.properties.ID_ASSO = data[i].ID_ASSO;
				marker.properties.NOM_ASSO = data[i].NOM_ASSO;
				marker.properties.COULEUR = data[i].COULEUR;
				marker.properties.NOM_PERM = data[i].NOM_PERM;
				marker.properties.NOM_LIEU = data[i].NOM_LIEU;
				marker.properties.TEL_PERM = data[i].TEL_PERM;
				marker.properties.TEL_NAT = data[i].TEL_NAT;
				marker.properties.ADRESSE = data[i].ADRESSE_GEOCOD;
				marker.properties.CODE_POSTAL = data[i].CODE_POSTAL;
				marker.properties.COMMUNE = data[i].COMMUNE;
				marker.properties.INTERNET = data[i].INTERNET;
				marker.properties.HORAIRE = data[i].HORAIRE;
				marker.properties.SPE_ETR = data[i].SPE_ETR;
				marker.properties.SPE_SOC = data[i].SPE_SOC;
				marker.properties.SPE_SEX = data[i].SPE_SEX;
				marker.properties.SPE_RAC = data[i].SPE_RAC;
				marker.properties.SPE_LCD = data[i].SPE_LCD;
				marker.properties.SPE = data[i].SPE;
				marker.properties.ACC = data[i].ACC;
				marker.properties.PUB = data[i].PUB;
				marker.bindTooltip(data[i].COMMUNE, {className: 'Tooltips', closeButton: false, offset: [0,-30]});
				marker.on('click', function(e) {popup(e.target); markerCible(e.target) });
				
				marker.addTo(markersLayer);
			
			}
		}

		window.addEventListener('DOMContentLoaded', init)
		
		//Une cible sur le marker sélectionné
		var markerCib;
		function markerCible(e) {
			if(markerCib) {map.removeLayer(markerCib);}
			markerCib = new L.marker(new L.latLng(e._latlng), {icon: picto_cible});
			markerCib.setZIndexOffset(-50);
			markerCib.addTo(map);
		}
		
		//Action au clic sur un marker
		function popup(e) {
			//ouverture de la sidebar
			if (document.getElementById('sidebar').classList.contains('collapsed')){
				sidebar.open('home');
				}
			
			//Remplissage de la popup
			document.getElementById('popup').style.display = "block";
			document.getElementById('defaut').style.display = "none";
			
			document.getElementById('titre').innerHTML = "<h1 style='color:"+e.properties.COULEUR+"'>"+e.properties.NOM_PERM+" / "+e.properties.NOM_ASSO+"</h1>";
			document.getElementById('coordonnees').innerHTML = "<h2 style='color:"+e.properties.COULEUR+"'>Coordonnées</h2><p class=email>"+e.properties.NOM_LIEU+" "+e.properties.ADRESSE+"</p><p class='tel'>"+e.properties.TEL_PERM+" / "+e.properties.TEL_NAT+"</p><p>"+e.properties.HORAIRE+"</p><p><a href="+e.properties.INTERNET+" target='blank' >&rarr; Aller sur le site internet</a></p>";
			document.getElementById('spe').innerHTML = "<h2 style='color:"+e.properties.COULEUR+"'>Spécialité</h2><p>"+e.properties.SPE ;
			document.getElementById('acc').innerHTML = "<h2 style='color:"+e.properties.COULEUR+"'>Accompagnement proposé au public</h2><p>"+e.properties.ACC;
			document.getElementById('pub').innerHTML = "<h2 style='color:"+e.properties.COULEUR+"'>Public pris en charge</h2><p>"+e.properties.PUB ;
		}
		
		//Ajout de la sidebar
		var sidebar = L.control.sidebar('sidebar').addTo(map);
		
		//Events au clic sur la carte
		map.on('click', function(e) {   
			//remettre tous les markers
			markersLayer.eachLayer(function (layer) {map.addLayer(layer);});
			//fermer ou ouvrir la sidebar
			if (document.getElementById('sidebar').classList.contains('collapsed')) {
				sidebar.open('home');
			}
			else {
				sidebar.close();
			}
			//remettre le texte d'intro
			document.getElementById('popup').style.display = "none";
			document.getElementById('defaut').style.display = "block";
			//Supprimer le marker cible
			if(markerCib) {map.removeLayer(markerCib);}
			//remettre les boutons par défaut
			document.getElementById("CHECK_SPE_ETR").setAttribute("class", "bouton_on");
			document.getElementById("CHECK_SPE_SOC").setAttribute("class", "bouton_on");
			document.getElementById("CHECK_SPE_RAC").setAttribute("class", "bouton_on");
			document.getElementById("CHECK_SPE_SEX").setAttribute("class", "bouton_on");
			document.getElementById("CHECK_SPE_LCD").setAttribute("class", "bouton_on");
		});
		
		//Action au clic sur le bouton d'accueil
		document.getElementById("logo").addEventListener("click", function(){
			document.getElementById('popup').style.display = "none";
			document.getElementById('defaut').style.display = "block";
			if (document.getElementById('sidebar').classList.contains('collapsed')) {
				sidebar.close();
			}
			else {
				sidebar.open('home');
			}
		});

		// Filtrer par fédération 
		function filter_asso (variable) {
			if(markerCib) {map.removeLayer(markerCib);}
			
			document.getElementById("CHECK_SPE_ETR").setAttribute("class", "bouton_on");
			document.getElementById("CHECK_SPE_SOC").setAttribute("class", "bouton_on");
			document.getElementById("CHECK_SPE_RAC").setAttribute("class", "bouton_on");
			document.getElementById("CHECK_SPE_SEX").setAttribute("class", "bouton_on");
			document.getElementById("CHECK_SPE_LCD").setAttribute("class", "bouton_on");
			
			markersLayer.eachLayer(function (layer) {
					if (layer.properties.ID_ASSO == variable) {
					map.addLayer(layer);
					} 
					else {map.removeLayer(layer);}
			});
		}
		
		
		//Filtrer par spécialité
		function filter(variable) {
		
			if(markerCib) {map.removeLayer(markerCib);}
			
			if (variable == "ETR") {
			if (document.getElementById("CHECK_SPE_ETR").value=="étrangers") {document.getElementById("CHECK_SPE_ETR").setAttribute("class", "bouton"); document.getElementById("CHECK_SPE_ETR").value= "non"} else if (document.getElementById("CHECK_SPE_ETR").value=="non"){document.getElementById("CHECK_SPE_ETR").setAttribute("class", "bouton_on"); document.getElementById("CHECK_SPE_ETR").value="étrangers";}
			}
			if (variable == "SOC") {
			if (document.getElementById("CHECK_SPE_SOC").value=="sociaux") {document.getElementById("CHECK_SPE_SOC").setAttribute("class", "bouton"); document.getElementById("CHECK_SPE_SOC").value= "non";} else if (document.getElementById("CHECK_SPE_SOC").value=="non"){document.getElementById("CHECK_SPE_SOC").setAttribute("class", "bouton_on");document.getElementById("CHECK_SPE_SOC").value="sociaux";}
			}
			if (variable == "RAC") {
			if (document.getElementById("CHECK_SPE_RAC").value=="raciste") {document.getElementById("CHECK_SPE_RAC").setAttribute("class", "bouton"); document.getElementById("CHECK_SPE_RAC").value= "non";} else if (document.getElementById("CHECK_SPE_RAC").value=="non"){document.getElementById("CHECK_SPE_RAC").setAttribute("class", "bouton_on");document.getElementById("CHECK_SPE_RAC").value="raciste";}
			}
			if (variable == "SEX") {
			if (document.getElementById("CHECK_SPE_SEX").value=="sexiste") {document.getElementById("CHECK_SPE_SEX").setAttribute("class", "bouton"); document.getElementById("CHECK_SPE_SEX").value= "non";} else if (document.getElementById("CHECK_SPE_SEX").value=="non"){document.getElementById("CHECK_SPE_SEX").setAttribute("class", "bouton_on");document.getElementById("CHECK_SPE_SEX").value="sexiste";}
			}
			if (variable == "LCD") {
			if (document.getElementById("CHECK_SPE_LCD").value=="lutte") {document.getElementById("CHECK_SPE_LCD").setAttribute("class", "bouton"); document.getElementById("CHECK_SPE_LCD").value= "non";} else if (document.getElementById("CHECK_SPE_LCD").value=="non"){document.getElementById("CHECK_SPE_LCD").setAttribute("class", "bouton_on");document.getElementById("CHECK_SPE_LCD").value="lutte";}
			}
			
			markersLayer.eachLayer(function (layer) {
					if (layer.properties.SPE.includes(document.getElementById("CHECK_SPE_ETR").value) || layer.properties.SPE.includes(document.getElementById("CHECK_SPE_SOC").value) || layer.properties.SPE.includes(document.getElementById("CHECK_SPE_RAC").value) || layer.properties.SPE.includes(document.getElementById("CHECK_SPE_SEX").value) || layer.properties.SPE.includes(document.getElementById("CHECK_SPE_LCD").value) ) {
					map.addLayer(layer);
					} 
					else {map.removeLayer(layer);}
				});
		}
		
   </script>
	
</body>



</html>
